function Project(a,b,c,d,e,f){var g=this;g.id=a,g.name=b,g.tags=c,g.featureMedia=d,g.featureMediaUrl=ko.observable(),g.media=e,g.showImage=ko.observable(!1),g.displayHeight=f}function Tag(a,b){var c=this;c.id=a,c.name=b}function Media(a,b,c){var d=this;d.content=a,d.description=b,d.type=c}function StartViewModel(){var a=3,b={},c=this;c.columnHeight=ko.observable(),c.visibleImageUrl=ko.observable(),c.introText=ko.observable(),c.footer=ko.observableArray(),c.projects=ko.observableArray(),c.tags=ko.observableArray(),c.selectedTags=ko.observableArray(),c.getSelectedProjects=function(){return c.selectedTags()&&0!==c.selectedTags().length?(c.columnHeight(0),ko.utils.arrayFilter(c.projects(),function(a){var b;return a.tags.forEach(function(a){-1!==c.selectedTags().indexOf(a)&&(b=!0)}),b&&c.columnHeight(c.columnHeight()+a.displayHeight),b})):(c.columnHeight(0),c.projects().forEach(function(a){c.columnHeight(c.columnHeight()+a.displayHeight)}),c.projects())},c.selectedProjects=ko.computed(getSelectedProjects),c.getSelectedProjects2=function(){if(c.selectedTags()&&0!==c.selectedTags().length){var b=ko.utils.arrayFilter(c.projects(),function(a){var b;return a.tags.forEach(function(a){-1!==c.selectedTags().indexOf(a)&&(b=!0)}),b&&c.columnHeight(c.columnHeight()+a.displayHeight),b});return SplitArrayIntoN(b,a)}return SplitArrayIntoN(c.projects(),a)},c.selectedProjects2=ko.computed(getSelectedProjects2),c.getTags=function(){jQuery.get("/wp-json/wp/v2/project_tag",null,function(a){for(var d=[],e=0;e<a.length;e++){var f=a[e],g=new Tag(f.id,f.name);d.push(g),b[f.id]=g}c.tags(d)})},c.getProjects=function(){jQuery.get("http://astr.nsur.org/wp-json/wp/v2/project",null,function(a){for(var d=[],e=0;e<a.length;e++){for(var f=a[e],g=[],h=0;h<f.project_tag.length;h++)g.push(b[f.project_tag[h]]);var i=39+24*Math.ceil(g.length/6),j=new Project(f.id,f.acf.display_name,g,f.acf.feature_image,null,i);d.push(j)}c.projects(d)})},c.getConfig=function(){jQuery.get("http://astr.nsur.org/wp-json/wp/v2/config/174",null,function(a){c.introText(a.acf.heading),a.acf.footer.forEach(function(a){var b=[];a.column.forEach(function(a){var c={heading:a.heading,content:a.content};b.push(c)}),c.footer.push(b)})})},c.getImage=function(a){jQuery.get("/wp-json/wp/v2/media/"+a,null,function(a){c.visibleImageUrl(a.media_details.sizes.thumbnail.source_url)})},c.showFeaturedImage=function(a,b){null!=a.featureMedia&&0!=a.featureMedia&&(c.getImage(a.featureMedia),a.featureMediaUrl(c.visibleImageUrl()),setTimeout(function(){a.showImage(!0)},100)),jQuery(".projectImage").css("position","absolute").css("top",b.pageY+40).css("left",b.pageX)},c.hideFeaturedImage=function(a){a.showImage(!1),c.visibleImageUrl(null)},c.getTags(),c.getProjects(),c.getConfig()}function ProjectViewModel(a){var b=this;b.name=ko.observable(),b.tags=ko.observable(),b.description=ko.observable(),b.media=ko.observable(),b.getProjects=function(){jQuery.get("/wp-json/wp/v2/project/"+a,null,function(a){b.name=a.name,b.tags=a.project_tag,b.description=a.description,b.media=a.media})}}function SplitArrayIntoN(a,b){var c,d,e=[],f=Math.ceil(a.length/b);for(c=0,d=a.length;d>c;c+=f)e.push(a.slice(c,c+f));return e}var vm=StartViewModel();ko.applyBindings(vm,document.getElementById("main"));