function Project(a,b,c,d,e,f){var g=this;g.id=a,g.name=b,g.tags=c,g.featureMedia=d,g.media=e,g.showImage=ko.observable(!1),g.displayHeight=f}function Tag(a,b){var c=this;c.id=a,c.name=b}function Media(a,b,c){var d=this;d.content=a,d.description=b,d.type=c}function StartViewModel(){var a=this;a.projects=ko.observableArray(),a.tags=ko.observableArray(),a.selectedTags=ko.observableArray(),a.columnHeight=ko.observable();var b={};a.selectedProjects=ko.computed(function(){return a.selectedTags()&&0!=a.selectedTags().length?(a.columnHeight(0),ko.utils.arrayFilter(a.projects(),function(b){var c;return b.tags.forEach(function(b){-1!==a.selectedTags().indexOf(b)&&(c=!0)}),c&&a.columnHeight(a.columnHeight()+b.displayHeight),c})):(a.columnHeight(0),a.projects().forEach(function(b){a.columnHeight(a.columnHeight()+b.displayHeight)}),a.projects())}),a.getTags=function(){jQuery.get("/wp-json/wp/v2/project_tag",null,function(c){for(var d=[],e=0;e<c.length;e++){var f=c[e],g=new Tag(f.id,f.name);d.push(g),b[f.id]=g}a.tags(d)})},a.getProjects=function(){jQuery.get("/wp-json/wp/v2/project",null,function(c){for(var d=[],e=0;e<c.length;e++){for(var f=c[e],g=[],h=0;h<f.project_tag.length;h++)g.push(b[f.project_tag[h]]);var i=39+24*Math.ceil(g.length/4),j=new Project(f.id,f.acf.display_name,g,f.acf.feature_image.url,null,i);d.push(j)}a.projects(d)})},a.showFeaturedImage=function(a){null!=a.featureMedia&&a.showImage(!0)},a.hideFeaturedImage=function(a){a.showImage(!1)},a.getTags(),a.getProjects(),a.introText=ko.observable(),a.getIntro=function(){jQuery.get("http://astr.nsur.org/wp-json/wp/v2/pages/164",null,function(b){a.introText(b.content.rendered)})},a.getIntro(),a.aboutText=ko.observable(),a.aboutTitle=ko.observable(),a.getAbout=function(){jQuery.get("http://astr.nsur.org/wp-json/wp/v2/pages/167",null,function(b){a.aboutText(b.content.rendered),a.aboutTitle(b.title.rendered)})},a.getAbout()}function ProjectViewModel(a){var b=this;b.name=ko.observable(),b.tags=ko.observable(),b.description=ko.observable(),b.media=ko.observable(),b.getProjects=function(){jQuery.get("/wp-json/wp/v2/project/"+a,null,function(a){b.name=a.name,b.tags=a.project_tag,b.description=a.description,b.media=a.media})}}ko.applyBindings(StartViewModel(),document.getElementById("main"));var router=new Grapnel({pushState:!0});router.get("projects/:id?",function(a){var b=a.params.id;ko.applyBindings(ProjectViewModel(b),document.getElementById("project"))}),router.get("start",function(a){ko.applyBindings(StartViewModel(),document.getElementById("main"))});